{
  "version": 3,
  "sources": ["angular:jit:template:src\\app\\features\\users\\users.html", "angular:jit:style:src\\app\\features\\users\\users.scss", "src/app/features/users/users.ts", "src/app/features/users/users.spec.ts"],
  "sourcesContent": ["<div class=\"container-fluid\">\r\n\r\n\r\n    <div class=\"row\">\r\n\r\n    </div>\r\n\r\n    <div class=\"row mt-1\">\r\n\r\n        <div class=\"d-flex justify-content-between align-items-center p-3 bg-light rounded border\">\r\n        <h5 class=\"mb-0 d-flex\"><mat-icon>supervisor_account</mat-icon> Usuarios</h5>\r\n        <button class=\"btn btn-primary\" (click)=\"newUser()\">Nuevo</button>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"row mt-1\">\r\n\r\n         <div class=\"d-flex justify-content-between align-items-center p-3 bg-light rounded border\">\r\n\r\n             <div  class=\"w-100\">\r\n                 \r\n                <app-users-table *ngIf=\"formVisible[0]\"  [users]=\"users\" (UserDelete)=\"onDelete($event)\" (UserEdit)=\"onEdit($event)\"></app-users-table>\r\n                \r\n                 <app-add-user *ngIf=\"formVisible[1]\" (userAdded)=\"addUser($event)\" (noChanges)=\"noChangeNewUser($event)\"></app-add-user>\r\n\r\n                <app-edit-user *ngIf=\"formVisible[2]\" [userEdit]=\"editUser\" (userEdited)=\"editedUser($event)\"  (noChanges)=\"noChangeEditUser($event)\" ></app-edit-user>\r\n\r\n             </div>\r\n\r\n\r\n         </div>\r\n\r\n\r\n    </div>\r\n\r\n\r\n</div>", "/* src/app/features/users/users.scss */\n/*# sourceMappingURL=users.css.map */\n", "import { Component } from '@angular/core';\r\nimport { UsersService } from './users-service';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Message } from '../../shared/services/message';\r\nimport { User } from '../../shared/entities/entity';\r\nimport { ConfirmDialog } from '../../shared/utils/confirm-dialog/confirm-dialog';\r\nimport { UsersTable } from './users-table/users-table';\r\nimport { EditUser } from './edit-user/edit-user';\r\nimport { AddUser } from './add-user/add-user';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatIcon } from '@angular/material/icon';\r\n\r\n\r\n@Component({\r\n  selector: 'app-users',\r\n  imports: [UsersTable, EditUser, AddUser, CommonModule, MatIcon],\r\n  templateUrl: './users.html',\r\n  styleUrl: './users.scss'\r\n})\r\nexport class Users {\r\n\r\n  editUser!: User;\r\n  users: User[] = [];\r\n  formVisible: boolean[] = [false,false,false]; // [list, add, edit]\r\n\r\n\r\n  constructor(private _servicios: UsersService, private dialog: MatDialog, private snackBar:Message) {\r\n\r\n\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    \r\n    \r\n     this.loadUsers();\r\n     this.formVisible[0] = true;\r\n\r\n  }\r\n\r\n  loadUsers() {\r\n\r\n    this._servicios.loadUsers().subscribe({\r\n\r\n      next: (response)=> {\r\n\r\n              this.users = response;\r\n              this.noChangeNewUser(true);\r\n\r\n      },\r\n      error: (err) => {\r\n        console.log(err);\r\n        this.snackBar.show(`UPS!! ha pasado algo ${err.message}`)\r\n      },\r\n      complete: ()=> {\r\n        \r\n        console.log('Proceso completado!!')\r\n      },\r\n    }\r\n      \r\n    ) \r\n\r\n  }\r\n\r\n  newUser() {\r\n\r\n    this.formVisible = [false,true,false];\r\n\r\n  }\r\n\r\n  noChangeNewUser(value: boolean) {\r\n\r\n    this.formVisible = [value,false,false];\r\n\r\n\r\n  }\r\n\r\n  addUser(user: User) {\r\n\r\n    this._servicios.addUser(user).subscribe({\r\n\r\n        next:(response:User) => {\r\n\r\n        if (response) {\r\n            this.snackBar.show('REGISTERED User!!!');\r\n          this.loadUsers();\r\n          \r\n          } \r\n          this.noChangeNewUser(true);\r\n      }\r\n      ,\r\n      error: (err) =>{\r\n\r\n         this.snackBar.show(err.message);\r\n\r\n      }\r\n      }\r\n    )\r\n\r\n\r\n  }\r\n\r\n  editedUser(userEdit: User) {\r\n\r\n    this._servicios.editUser(userEdit).subscribe({\r\n\r\n      next:(response:User) => {\r\n\r\n        if (response) {\r\n          this.snackBar.show('UPDATED User!!!');\r\n          const index = this.users.findIndex(user => user.id === userEdit.id);\r\n\r\n  \r\n          if (index !== -1) {\r\n\r\n          this.users[index] = {...userEdit};\r\n          this.users = [...this.users];\r\n          \r\n          } \r\n          this.noChangeEditUser(true);\r\n      }\r\n      },\r\n      error: (err) =>{\r\n\r\n         this.snackBar.show(err.message);\r\n\r\n      }\r\n      }\r\n    )\r\n\r\n\r\n  }\r\n\r\n  onEdit(userEdit: User) {\r\n\r\n    \r\n    this.editUser = userEdit;   \r\n    this.formVisible = [false,false,true]\r\n\r\n  }\r\n\r\n  noChangeEditUser(value: boolean) {\r\n\r\n    this.formVisible = [value,false,false];\r\n\r\n\r\n  }\r\n\r\n   onDelete(userDelete: User) {\r\n  \r\n      const dialogRef = this.dialog.open(ConfirmDialog, {\r\n      width: '450px',\r\n      height: '250px',\r\n      data: { mensaje: '¿Estás seguro de eliminar el usuario ' + userDelete.name + '?' }\r\n    });\r\n  \r\n    dialogRef.afterClosed().subscribe(resultado => {\r\n      if (resultado) {\r\n        this._servicios.deleteUser(userDelete.id).subscribe(\r\n          \r\n          {\r\n\r\n            next: (value: User)=> {\r\n              \r\n              if(value) {\r\n\r\n                  this.users = this.users.filter(user => user.id !== userDelete.id);\r\n                \r\n               \r\n                this.snackBar.show('DELETED User!!!');\r\n\r\n              }\r\n            },\r\n            error: (err)=>{\r\n\r\n              console.log(err);\r\n              this.snackBar.show(`Ha sucedido lo siguiente ${err.message}`);\r\n\r\n            }\r\n\r\n          }\r\n\r\n         \r\n  \r\n        )\r\n      } else {\r\n        console.log('El usuario canceló');\r\n      }\r\n    });\r\n  \r\n    }\r\n\r\n\r\n\r\n}\r\n", "import { ComponentFixture, TestBed } from '@angular/core/testing';\r\n\r\nimport { Users } from './users';\r\n\r\ndescribe('Users', () => {\r\n  let component: Users;\r\n  let fixture: ComponentFixture<Users>;\r\n\r\n  beforeEach(async () => {\r\n    await TestBed.configureTestingModule({\r\n      imports: [Users]\r\n    })\r\n    .compileComponents();\r\n\r\n    fixture = TestBed.createComponent(Users);\r\n    component = fixture.componentInstance;\r\n    fixture.detectChanges();\r\n  });\r\n\r\n  it('should create', () => {\r\n    expect(component).toBeTruthy();\r\n  });\r\n});\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAA;AAAA,IAAAC,cAAA;AAAA;AAAA,IAAAD,iBAAA;AAAA;AAAA;;;ICmBa;;;;;;;AAnBb;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AASO,IAAM,QAAN,MAAME,OAAK;MAOI;MAAkC;MAA2B;MALjF;MACA,QAAgB,CAAA;MAChB,cAAyB,CAAC,OAAM,OAAM,KAAK;;MAG3C,YAAoB,YAAkC,QAA2B,UAAgB;AAA7E,aAAA,aAAA;AAAkC,aAAA,SAAA;AAA2B,aAAA,WAAA;MAIjF;MAEA,WAAQ;AAGL,aAAK,UAAS;AACd,aAAK,YAAY,CAAC,IAAI;MAEzB;MAEA,YAAS;AAEP,aAAK,WAAW,UAAS,EAAG,UAAU;UAEpC,MAAM,CAAC,aAAW;AAEV,iBAAK,QAAQ;AACb,iBAAK,gBAAgB,IAAI;UAEjC;UACA,OAAO,CAAC,QAAO;AACb,oBAAQ,IAAI,GAAG;AACf,iBAAK,SAAS,KAAK,wBAAwB,IAAI,OAAO,EAAE;UAC1D;UACA,UAAU,MAAI;AAEZ,oBAAQ,IAAI,sBAAsB;UACpC;SACD;MAIH;MAEA,UAAO;AAEL,aAAK,cAAc,CAAC,OAAM,MAAK,KAAK;MAEtC;MAEA,gBAAgB,OAAc;AAE5B,aAAK,cAAc,CAAC,OAAM,OAAM,KAAK;MAGvC;MAEA,QAAQ,MAAU;AAEhB,aAAK,WAAW,QAAQ,IAAI,EAAE,UAAU;UAEpC,MAAK,CAAC,aAAiB;AAEvB,gBAAI,UAAU;AACV,mBAAK,SAAS,KAAK,oBAAoB;AACzC,mBAAK,UAAS;YAEd;AACA,iBAAK,gBAAgB,IAAI;UAC7B;UAEA,OAAO,CAAC,QAAO;AAEZ,iBAAK,SAAS,KAAK,IAAI,OAAO;UAEjC;SACC;MAIL;MAEA,WAAW,UAAc;AAEvB,aAAK,WAAW,SAAS,QAAQ,EAAE,UAAU;UAE3C,MAAK,CAAC,aAAiB;AAErB,gBAAI,UAAU;AACZ,mBAAK,SAAS,KAAK,iBAAiB;AACpC,oBAAM,QAAQ,KAAK,MAAM,UAAU,UAAQ,KAAK,OAAO,SAAS,EAAE;AAGlE,kBAAI,UAAU,IAAI;AAElB,qBAAK,MAAM,KAAK,IAAI,mBAAI;AACxB,qBAAK,QAAQ,CAAC,GAAG,KAAK,KAAK;cAE3B;AACA,mBAAK,iBAAiB,IAAI;YAC9B;UACA;UACA,OAAO,CAAC,QAAO;AAEZ,iBAAK,SAAS,KAAK,IAAI,OAAO;UAEjC;SACC;MAIL;MAEA,OAAO,UAAc;AAGnB,aAAK,WAAW;AAChB,aAAK,cAAc,CAAC,OAAM,OAAM,IAAI;MAEtC;MAEA,iBAAiB,OAAc;AAE7B,aAAK,cAAc,CAAC,OAAM,OAAM,KAAK;MAGvC;MAEC,SAAS,YAAgB;AAEtB,cAAM,YAAY,KAAK,OAAO,KAAK,eAAe;UAClD,OAAO;UACP,QAAQ;UACR,MAAM,EAAE,SAAS,gDAA0C,WAAW,OAAO,IAAG;SACjF;AAED,kBAAU,YAAW,EAAG,UAAU,eAAY;AAC5C,cAAI,WAAW;AACb,iBAAK,WAAW,WAAW,WAAW,EAAE,EAAE,UAExC;cAEE,MAAM,CAAC,UAAc;AAEnB,oBAAG,OAAO;AAEN,uBAAK,QAAQ,KAAK,MAAM,OAAO,UAAQ,KAAK,OAAO,WAAW,EAAE;AAGlE,uBAAK,SAAS,KAAK,iBAAiB;gBAEtC;cACF;cACA,OAAO,CAAC,QAAM;AAEZ,wBAAQ,IAAI,GAAG;AACf,qBAAK,SAAS,KAAK,4BAA4B,IAAI,OAAO,EAAE;cAE9D;aAED;UAKL,OAAO;AACL,oBAAQ,IAAI,uBAAoB;UAClC;QACF,CAAC;MAED;;;;;;;AA3KS,YAAK,WAAA;MANjB,UAAU;QACT,UAAU;QACV,SAAS,CAAC,YAAY,UAAU,SAAS,cAAc,OAAO;QAC9D,UAAA;;OAED;OACY,KAAK;;;;;ACnBlB;;;AAEA,IAAAC;AAEA,aAAS,SAAS,MAAK;AACrB,UAAI;AACJ,UAAI;AAEJ,iBAAW,MAAW;AACpB,cAAM,QAAQ,uBAAuB;UACnC,SAAS,CAAC,KAAK;SAChB,EACA,kBAAiB;AAElB,kBAAU,QAAQ,gBAAgB,KAAK;AACvC,oBAAY,QAAQ;AACpB,gBAAQ,cAAa;MACvB,EAAC;AAED,SAAG,iBAAiB,MAAK;AACvB,eAAO,SAAS,EAAE,WAAU;MAC9B,CAAC;IACH,CAAC;;;",
  "names": ["users_default", "init_users", "Users", "init_users"]
}
