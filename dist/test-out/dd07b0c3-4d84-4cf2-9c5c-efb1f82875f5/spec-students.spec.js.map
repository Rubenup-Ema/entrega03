{
  "version": 3,
  "sources": ["angular:jit:template:src\\app\\features\\students\\students.html", "angular:jit:style:src\\app\\features\\students\\students.scss", "src/app/features/students/students.ts", "src/app/features/students/students.spec.ts"],
  "sourcesContent": ["<div class=\"container-fluid\">\n\n\n   <div class=\"row mt-1\">\n\n        <div class=\"d-flex justify-content-between align-items-center p-3 bg-light rounded border\">\n        <h5 class=\"mb-0 d-flex\"><mat-icon>how_to_reg</mat-icon> Estudiantes</h5>\n        <button class=\"btn btn-primary\" (click)=\"newStudent()\">Nuevo</button>\n        </div>\n\n    </div>\n\n    <div class=\"row mt-2\">\n\n         <div class=\"d-flex justify-content-between align-items-center p-3 bg-light rounded border\">\n\n             <div  class=\"w-100\" >\n                 \n                 <app-students-table *ngIf=\"formVisible[0]===true\"  [students]=\"students\" (studentDelete)=\"onDelete($event)\" (studentEdit)=\"onEdit($event)\"></app-students-table>\n                 <app-add-student *ngIf=\"formVisible[1]\" [courses]=\"courses\" (noChanges)=\"noChangeNewSudent($event)\" (studentAdded)=\"addStudent($event)\"></app-add-student>\n                 <app-edit-student *ngIf=\"formVisible[2]\" [courses]=\"courses\" [studentEdit]=\"editStudent\" (noChanges)=\"noChangeNewSudent($event)\" (studentEdited)=\"editedStudent($event)\"></app-edit-student>\n             </div>\n\n        \n\n         </div>\n\n    </div>\n\n\n</div>", "/* src/app/features/students/students.scss */\n/*# sourceMappingURL=students.css.map */\n", "import { Component, OnInit } from '@angular/core';\nimport { StudentsTable } from \"./students-table/students-table\";\nimport { ServiceStudents } from './students-service/service.students';\nimport { Course, Student } from '../../shared/entities/entity';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ConfirmDialog } from '../../shared/utils/confirm-dialog/confirm-dialog';\nimport { Message } from '../../shared/services/message';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { AddStudent } from \"./add-student/add-student\";\nimport { CoursesService } from '../course/courses-service/courses.service';\nimport { EditStudent } from './edit-student/edit-student';\nimport { MatIcon } from '@angular/material/icon';\n\n@Component({\n  selector: 'app-students',\n  imports: [StudentsTable, FormsModule, CommonModule, AddStudent,EditStudent, MatIcon],\n  templateUrl: './students.html',\n  styleUrl: './students.scss'\n})\nexport class Students implements OnInit {\n\n  courses: Course[] = [];\n  students: Student[] = [];\n  editStudent!: Student;\n  formVisible: boolean[] = [true,false,false]; // [list, add, edit]\n  constructor(private _servicios:ServiceStudents, private _serviciosC: CoursesService, private dialog: MatDialog, private snackBar:Message) {\n\n\n\n  }\n\n   async ngOnInit() {\n     await this.loadCourses();\n    \n     this.formVisible[0] = true;\n  }\n\n  async loadStudents() {\n\n    await this._servicios.loadStudents().subscribe({\n      next:   (data:Student[]) => {\n\n          this.students = data;\n          this.students.forEach(element=> {\n\n            element.title = this.titleCourse(element.courseId);\n\n          })\n          this.students = [...this.students];\n          this.noChangeNewSudent(true);\n\n         \n\n        }, error: (err) => {\n\n          this.snackBar.show(err.message);\n\n        },\n        complete: ()=> {\n\n          this.students = [...this.students];\n\n        }\n    }\n      \n      \n\n      \n    ) \n\n  }\n\n\n   titleCourse(id:number) {\n\n      const curso = this.courses.find(item => item.id.toString() === id.toString());\n\n      if (curso) {\n\n        return curso.title\n\n      } else {\n\n        return \"NOT COURSING\"\n\n      }\n\n   }\n\n  async loadCourses() {\n\n    await this._serviciosC.loadCourses().subscribe(\n      \n       {\n        next: (response:Course[]) => {\n\n          this.courses = response;\n\n        },\n        error: (err) => {\n\n          this.snackBar.show(`UPS!! ha pasado algo ${err.message}`)\n\n        },\n\n        complete: ()=>{\n\n            this.loadStudents();\n\n        }\n\n       }\n\n\n      \n    ) \n\n  }\n\n  newStudent() {\n\n    this.formVisible = [false,true,false];\n\n  }\n\n  noChangeNewSudent(value: boolean) {\n\n\n    this.formVisible = [value,false,false];\n\n\n  }\n\n \n\n   addStudent(student: Student) {\n\n\n    this._servicios.addStudent(student).subscribe({\n\n      next:(data:Student) => {\n\n        if (data) {\n          this.snackBar.show('ADDED Student!!!');\n         \n         \n        } \n\n      },\n      error: (err) =>{\n\n         this.snackBar.show(err.message);\n\n      },\n      complete: ()=>{\n        this.loadStudents();\n      }\n      }\n    )\n\n\n  }\n\n  editedStudent(studentEdit: Student) {\n\n    this._servicios.editStudent(studentEdit).subscribe({\n\n      next:(data:Student) => {\n\n        if (data) {\n          this.snackBar.show('UPDATE Student!!!');\n          const index = this.students.findIndex(student => student.id === studentEdit.id);\n\n  \n          if (index !== -1) {\n         \n          var course = this.courses.find(course => course.id == studentEdit.courseId);\n          studentEdit.title = \"\" + course?.title;\n          this.students[index] = {...studentEdit};\n          this.students = [...this.students];\n          \n          } \n          this.noChangeNewSudent(true);\n      }\n      },\n      error: (err) =>{\n\n         this.snackBar.show(err.message);\n\n      }\n      }\n    )\n\n\n  }\n\n  onEdit(studentEdit: Student) {\n\n    \n    this.editStudent = studentEdit;   \n    this.formVisible = [false,false,true]\n\n  }\n\n onDelete(studentDelete: Student) {\n\n    const dialogRef = this.dialog.open(ConfirmDialog, {\n    width: '450px',\n    height: '200px',\n    data: { mensaje: '¿Estás seguro de eliminar al estudiante ' + studentDelete.name +  '?' }\n  });\n\n  dialogRef.afterClosed().subscribe(resultado => {\n    if (resultado) {\n      this._servicios.deleteStudent(studentDelete.id).subscribe(\n\n         {\n\n            next: (response: Student)=> {\n              \n              if(response) {\n\n                  this.students = this.students.filter(student => student.id !== studentDelete.id);\n                \n               \n                this.snackBar.show('DELETED Student!!!');\n\n              }\n            },\n            error: (err)=>{\n\n              console.log(err);\n              this.snackBar.show(`Ha sucedido lo siguiente ${err.message}`);\n\n            }\n\n          }\n\n\n      )\n    } else {\n      console.log('El usuario canceló');\n    }\n  });\n\n  }\n\n}\n", "import { ComponentFixture, TestBed } from '@angular/core/testing';\n\nimport { Students } from './students';\n\ndescribe('Students', () => {\n  let component: Students;\n  let fixture: ComponentFixture<Students>;\n\n  beforeEach(async () => {\n    await TestBed.configureTestingModule({\n      imports: [Students]\n    })\n    .compileComponents();\n\n    fixture = TestBed.createComponent(Students);\n    component = fixture.componentInstance;\n    fixture.detectChanges();\n  });\n\n  it('should create', () => {\n    expect(component).toBeTruthy();\n  });\n});\n"],
  "mappings": "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",
  "names": ["students_default", "init_students", "Students", "course", "init_students"]
}
