import{b as C}from"./chunk-XX7XLLNK.js";import{Q as T,a as L,b as u,c as E,d as x,e as v,f as N,h as j,i as M,m as G,n as B,o as D}from"./chunk-ALUG67OU.js";import{d as _,e as y,h as F}from"./chunk-ZNQ3KTVS.js";import{Ab as a,Ea as m,Ja as p,Oa as I,R as h,Ua as c,V as S,eb as l,fb as n,gb as o,hb as g,p as b,qb as w}from"./chunk-VNUH3GRI.js";var f=class t{constructor(e){this.http=e}url="https://curso.sunsetmanager.com/api";validarLogin(e,i){return this.http.get(`${this.url}/login?email=${e}&password=${i}`).pipe(b(r=>r))}static \u0275fac=function(i){return new(i||t)(S(F))};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})};function H(t,e){t&1&&(n(0,"div",12),a(1," El usuario es obligatorio, verifique el formato del email "),o())}function O(t,e){t&1&&(n(0,"div",12),a(1," La contrase\xF1a es obligatoria al menos 5 caracteres "),o())}function V(t,e){t&1&&(n(0,"span"),a(1,"Espere procesando..."),o())}var k=class t{constructor(e,i,r,s){this.router=e;this.fb=i;this._services=r;this.snackBar=s;this.form=this.fb.group({username:new v("",[u.required,u.email]),password:new v("",[u.required,u.minLength(5)])})}form;procesando=!1;ngOnInit(){sessionStorage.setItem("user","")}onSubmit(){this.procesando=!0,this._services.validarLogin(this.form.get("username")?.value,this.form.get("password")?.value).subscribe(e=>{if(e.ok.toString()==="true"){let i=e.result[0];sessionStorage.setItem("user",i.name),this.router.navigate(["/home"])}else this.procesando=!1,this.snackBar.show(e.msg)})}static \u0275fac=function(i){return new(i||t)(p(C),p(G),p(f),p(T))};static \u0275cmp=I({type:t,selectors:[["app-login"]],decls:18,vars:5,consts:[[1,"d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","p-4","shadow",2,"min-width","350px"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username","placeholder","alice@gmail.com",1,"form-control"],["class","text-danger small",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","password123",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[4,"ngIf"],[1,"text-danger","small"]],template:function(i,r){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Iniciar Sesi\xF3n"),o(),n(4,"form",3),w("ngSubmit",function(){return r.onSubmit()}),n(5,"div",4)(6,"label",5),a(7,"Usuario"),o(),g(8,"input",6),c(9,H,2,0,"div",7),o(),n(10,"div",4)(11,"label",8),a(12,"Contrase\xF1a"),o(),g(13,"input",9),c(14,O,2,0,"div",7),o(),n(15,"button",10),a(16," Entrar "),o(),c(17,V,2,0,"span",11),o()()()),i&2){let s,d;m(4),l("formGroup",r.form),m(5),l("ngIf",((s=r.form.get("username"))==null?null:s.touched)&&((s=r.form.get("username"))==null?null:s.invalid)),m(5),l("ngIf",((d=r.form.get("password"))==null?null:d.touched)&&((d=r.form.get("password"))==null?null:d.invalid)),m(),l("disabled",r.form.invalid),m(2),l("ngIf",r.procesando)}},dependencies:[B,N,L,E,x,y,_,D,j,M],encapsulation:2})};export{k as Login};
