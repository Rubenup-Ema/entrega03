import{a as P,b as z,c as J,d as K,e as L,f as Q,g as U,h as W,i as X,j as Y,k as Z,l as ee,m as te,n as ie,o as re,p as oe}from"./chunk-Z2TETTXJ.js";import{Q as $,a as F,b as E,c as V,d as N,f as M,h as k,i as A,m as R,o as O}from"./chunk-ALUG67OU.js";import{d as w,e as T}from"./chunk-ZNQ3KTVS.js";import{$ as _,Ab as l,Cb as I,Ea as u,Ja as h,Oa as v,Ua as m,Wa as g,a as y,aa as C,eb as d,fb as n,gb as o,hb as p,lb as x,mb as S,ob as D,qb as c,rb as f}from"./chunk-VNUH3GRI.js";function le(t,e){t&1&&(n(0,"th",12),l(1," ID "),o())}function ae(t,e){if(t&1&&(n(0,"td",13),l(1),o()),t&2){let i=e.$implicit;u(),I(" ",i.id," ")}}function ue(t,e){t&1&&(n(0,"th",12),l(1," Curso "),o())}function de(t,e){if(t&1&&(n(0,"td",13),l(1),o()),t&2){let i=e.$implicit;u(),I(" ",i.title," ")}}function me(t,e){t&1&&(n(0,"th",12),l(1," Descripci\xF3n "),o())}function ce(t,e){if(t&1&&(n(0,"td",13),l(1),o()),t&2){let i=e.$implicit;u(),I(" ",i.description," ")}}function pe(t,e){t&1&&(n(0,"th",12),l(1," Estudiantes "),o())}function fe(t,e){if(t&1&&(n(0,"td",13),l(1),o()),t&2){let i=e.$implicit;u(),I(" ",i.tstudent," ")}}function _e(t,e){t&1&&(n(0,"th"),l(1," Acciones "),o())}function Ce(t,e){if(t&1){let i=D();n(0,"tr",14)(1,"button",15),c("click",function(){let s=_(i).$implicit,a=f();return C(a.onEdit(s))}),n(2,"mat-icon"),l(3,"edit"),o()(),n(4,"button",16),c("click",function(){let s=_(i).$implicit,a=f();return C(a.onDelete(s))}),n(5,"mat-icon"),l(6,"delete"),o()()()}if(t&2){let i=e.$implicit;u(4),d("disabled",i.tstudent>0)}}function be(t,e){t&1&&p(0,"tr",17)}function ge(t,e){t&1&&p(0,"tr",18)}var B=class t{courses=[];CourseEdit=new g;CourseDelete=new g;displayedColumns=["id","title","description","tstudent","acciones"];constructor(){}ngOnInit(){}onDelete(e){this.CourseDelete.emit(e)}onEdit(e){let i;i=e,this.CourseEdit.emit(i)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=v({type:t,selectors:[["app-courses-table"]],inputs:{courses:"courses"},outputs:{CourseEdit:"CourseEdit",CourseDelete:"CourseDelete"},decls:18,vars:3,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","tstudent"],["matColumnDef","acciones"],[4,"matHeaderCellDef"],["class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"text-center"],["mat-icon-button","","color","primary",1,"btn","btn-success",3,"click"],["mat-icon-button","","color","warn",1,"btn","btn-danger",3,"click","disabled"],["mat-header-row",""],["mat-row",""]],template:function(i,r){i&1&&(n(0,"table",0),x(1,1),m(2,le,2,0,"th",2)(3,ae,2,1,"td",3),S(),x(4,4),m(5,ue,2,0,"th",2)(6,de,2,1,"td",3),S(),x(7,5),m(8,me,2,0,"th",2)(9,ce,2,1,"td",3),S(),x(10,6),m(11,pe,2,0,"th",2)(12,fe,2,1,"td",3),S(),x(13,7),m(14,_e,2,0,"th",8)(15,Ce,7,1,"tr",9),S(),m(16,be,1,0,"tr",10)(17,ge,1,0,"tr",11),o()),i&2&&(d("dataSource",r.courses),u(16),d("matHeaderRowDef",r.displayedColumns),u(),d("matRowDefColumns",r.displayedColumns))},dependencies:[Z,P,J,U,K,z,W,L,Q,X,Y,te,ee],encapsulation:2})};function ve(t,e){t&1&&(n(0,"div"),l(1," DNI es requerido "),o())}function Ee(t,e){t&1&&(n(0,"div"),l(1," Nombre del curso es requerido "),o())}function xe(t,e){t&1&&(n(0,"div"),l(1," Descripci\xF3n es requerido "),o())}var q=class t{constructor(e){this.fb=e}courseForm;courseAdded=new g;noChanges=new g;ngOnInit(){this.courseForm=this.fb.group({id:[0,[E.required]],title:["",E.required],description:["",E.required]})}onSubmit(){this.courseAdded.emit(this.courseForm.value)}onReset(){this.courseForm.reset(),this.noChanges.emit(!0)}static \u0275fac=function(i){return new(i||t)(h(R))};static \u0275cmp=v({type:t,selectors:[["app-add-course"]],outputs:{courseAdded:"courseAdded",noChanges:"noChanges"},decls:26,vars:5,consts:[[1,"container","bg-light"],[1,"mb-3",3,"ngSubmit","formGroup"],[1,"form-group"],["for","dni"],["type","text","id","id","formControlName","id","placeholder","Ingrese ID","readonly","",1,"form-control"],[4,"ngIf"],["for","name"],["type","text","id","title","formControlName","title","placeholder","Ingrese nombre del curso",1,"form-control"],["for","surname"],["type","text","id","description","formControlName","description","placeholder","Ingrese breve descripci\xF3n",1,"form-control"],[1,"row","text-center","mb-3"],[1,"col","text-center"],["type","submit",1,"btn","btn-success",3,"click","disabled"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(i,r){if(i&1&&(n(0,"div",0)(1,"h2"),l(2,"A\xF1adir Curso"),o(),n(3,"form",1),c("ngSubmit",function(){return r.onSubmit()}),n(4,"div",2)(5,"label",3),l(6,"ID:"),o(),p(7,"input",4),m(8,ve,2,0,"div",5),o(),n(9,"div",2)(10,"label",6),l(11,"Curso:"),o(),p(12,"input",7),m(13,Ee,2,0,"div",5),o(),n(14,"div",2)(15,"label",8),l(16,"Descripci\xF3n:"),o(),p(17,"input",9),m(18,xe,2,0,"div",5),o()(),n(19,"div",10)(20,"div",11)(21,"button",12),c("click",function(){return r.onSubmit()}),l(22,"Agregar Curso"),o()(),n(23,"div",11)(24,"button",13),c("click",function(){return r.onReset()}),l(25,"Salir"),o()()()()),i&2){let s,a,b;u(3),d("formGroup",r.courseForm),u(5),d("ngIf",((s=r.courseForm.get("dni"))==null?null:s.invalid)&&((s=r.courseForm.get("dni"))==null?null:s.touched)),u(5),d("ngIf",((a=r.courseForm.get("title"))==null?null:a.invalid)&&((a=r.courseForm.get("title"))==null?null:a.touched)),u(5),d("ngIf",((b=r.courseForm.get("description"))==null?null:b.invalid)&&((b=r.courseForm.get("description"))==null?null:b.touched)),u(3),d("disabled",r.courseForm.invalid)}},dependencies:[O,M,F,V,N,k,A,T,w],encapsulation:2})};function Se(t,e){t&1&&(n(0,"div"),l(1," DNI es requerido "),o())}function De(t,e){t&1&&(n(0,"div"),l(1," Nombre del curso es requerido "),o())}function we(t,e){t&1&&(n(0,"div"),l(1," Descripci\xF3n es requerido "),o())}var G=class t{constructor(e){this.fb=e}courseForm;courseEdited=new g;noChanges=new g;_courseEdit;course={id:0,title:"",description:"",tstudent:0};set courseEdit(e){e&&(this._courseEdit=e,this.course=y({},e),this.courseForm&&this.loadCourseData())}loadCourseData(){this.courseForm.setValue({id:this.course.id,title:this.course.title,description:this.course.description,tstudent:this.course.tstudent})}ngOnInit(){this.courseForm=this.fb.group({id:[0,[E.required]],title:["",E.required],description:["",E.required],tstudent:[0]}),this._courseEdit&&this.loadCourseData()}onSubmit(){this.courseEdited.emit(this.courseForm.value)}onReset(){this.noChanges.emit(!0)}static \u0275fac=function(i){return new(i||t)(h(R))};static \u0275cmp=v({type:t,selectors:[["app-edit-course"]],inputs:{courseEdit:"courseEdit"},outputs:{courseEdited:"courseEdited",noChanges:"noChanges"},decls:26,vars:5,consts:[[1,"container","bg-light"],[1,"mb-3",3,"ngSubmit","formGroup"],[1,"form-group"],["for","dni"],["type","text","id","id","formControlName","id","placeholder","Ingrese ID","readonly","",1,"form-control"],[4,"ngIf"],["for","name"],["type","text","id","title","formControlName","title","placeholder","Ingrese nombre del curso",1,"form-control"],["for","surname"],["type","text","id","description","formControlName","description","placeholder","Ingrese breve descripci\xF3n",1,"form-control"],[1,"row","text-center","mb-3"],[1,"col","text-center"],["type","submit",1,"btn","btn-success",3,"click","disabled"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(i,r){if(i&1&&(n(0,"div",0)(1,"h2"),l(2,"Editar Curso"),o(),n(3,"form",1),c("ngSubmit",function(){return r.onSubmit()}),n(4,"div",2)(5,"label",3),l(6,"ID:"),o(),p(7,"input",4),m(8,Se,2,0,"div",5),o(),n(9,"div",2)(10,"label",6),l(11,"Curso:"),o(),p(12,"input",7),m(13,De,2,0,"div",5),o(),n(14,"div",2)(15,"label",8),l(16,"Descripci\xF3n:"),o(),p(17,"input",9),m(18,we,2,0,"div",5),o()(),n(19,"div",10)(20,"div",11)(21,"button",12),c("click",function(){return r.onSubmit()}),l(22,"Editar Curso"),o()(),n(23,"div",11)(24,"button",13),c("click",function(){return r.onReset()}),l(25,"Salir"),o()()()()),i&2){let s,a,b;u(3),d("formGroup",r.courseForm),u(5),d("ngIf",((s=r.courseForm.get("dni"))==null?null:s.invalid)&&((s=r.courseForm.get("dni"))==null?null:s.touched)),u(5),d("ngIf",((a=r.courseForm.get("title"))==null?null:a.invalid)&&((a=r.courseForm.get("title"))==null?null:a.touched)),u(5),d("ngIf",((b=r.courseForm.get("description"))==null?null:b.invalid)&&((b=r.courseForm.get("description"))==null?null:b.touched)),u(3),d("disabled",r.courseForm.invalid)}},dependencies:[O,M,F,V,N,k,A,T,w],encapsulation:2})};function Te(t,e){if(t&1){let i=D();n(0,"app-courses-table",10),c("CourseDelete",function(s){_(i);let a=f();return C(a.onDelete(s))})("CourseEdit",function(s){_(i);let a=f();return C(a.onEdit(s))}),o()}if(t&2){let i=f();d("courses",i.courses)}}function Ie(t,e){if(t&1){let i=D();n(0,"app-add-course",11),c("courseAdded",function(s){_(i);let a=f();return C(a.addCourse(s))})("noChanges",function(s){_(i);let a=f();return C(a.noChangeNewCourse(s))}),o()}}function ye(t,e){if(t&1){let i=D();n(0,"app-edit-course",12),c("courseEdited",function(s){_(i);let a=f();return C(a.editedCourse(s))})("noChanges",function(s){_(i);let a=f();return C(a.noChangeEditCourse(s))}),o()}if(t&2){let i=f();d("courseEdit",i.editCourse)}}var se=class t{constructor(e,i,r){this._servicios=e;this.dialog=i;this.snackBar=r}editCourse;courses=[];formVisible=[!1,!1,!1];ngOnInit(){this.loadCourses(),this.formVisible[0]=!0}loadCourses(){this._servicios.loadCourses().subscribe(e=>{e.ok.toString()==="true"&&(this.courses=e.result,this.noChangeNewCourse(!0))})}newCourse(){this.formVisible=[!1,!0,!1]}noChangeNewCourse(e){this.formVisible=[e,!1,!1]}addCourse(e){this._servicios.addCourse(e).subscribe({next:i=>{i.ok.toString()==="true"&&(this.snackBar.show(i.msg),this.loadCourses())},error:i=>{this.snackBar.show(i.message)}})}editedCourse(e){this._servicios.editCourse(e).subscribe({next:i=>{if(i.ok.toString()==="true"){this.snackBar.show(i.msg);let r=this.courses.findIndex(s=>s.id===e.id);r!==-1&&(this.courses[r]=y({},e),this.courses=[...this.courses]),this.noChangeEditCourse(!0)}},error:i=>{this.snackBar.show(i.message)}})}onEdit(e){this.editCourse=e,this.formVisible=[!1,!1,!0]}noChangeEditCourse(e){this.formVisible=[e,!1,!1]}onDelete(e){this.dialog.open(re,{width:"350px",data:{mensaje:"\xBFEst\xE1s seguro de eliminar el curso "+e.title+"?"}}).afterClosed().subscribe(r=>{r?this._servicios.deleteCourse(e.id).subscribe(s=>{s.ok.toString()==="true"?(this.courses=this.courses.filter(a=>a.id!==e.id),this.snackBar.show(s.msg)):this.snackBar.show(s.msg)}):console.log("El usuario cancel\xF3")})}static \u0275fac=function(i){return new(i||t)(h(oe),h(ie),h($))};static \u0275cmp=v({type:t,selectors:[["app-course"]],decls:14,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"row","mt-5"],[1,"d-flex","justify-content-between","align-items-center","p-3","bg-light","rounded","border"],[1,"mb-0"],[1,"btn","btn-primary",3,"click"],[1,"w-100"],[3,"courses","CourseDelete","CourseEdit",4,"ngIf"],[3,"courseAdded","noChanges",4,"ngIf"],[3,"courseEdit","courseEdited","noChanges",4,"ngIf"],[3,"CourseDelete","CourseEdit","courses"],[3,"courseAdded","noChanges"],[3,"courseEdited","noChanges","courseEdit"]],template:function(i,r){i&1&&(n(0,"div",0),p(1,"div",1),n(2,"div",2)(3,"div",3)(4,"h5",4),l(5,"Cursos"),o(),n(6,"button",5),c("click",function(){return r.newCourse()}),l(7,"Nuevo"),o()()(),n(8,"div",2)(9,"div",3)(10,"div",6),m(11,Te,1,1,"app-courses-table",7)(12,Ie,1,0,"app-add-course",8)(13,ye,1,1,"app-edit-course",9),o()()()()),i&2&&(u(11),d("ngIf",r.formVisible[0]),u(),d("ngIf",r.formVisible[1]),u(),d("ngIf",r.formVisible[2]))},dependencies:[B,T,w,q,G],encapsulation:2})};export{se as Courses};
