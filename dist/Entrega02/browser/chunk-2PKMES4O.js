import{a as oe}from"./chunk-5XU5DKBI.js";import{a as z,b as L,c as J,d as K,e as Q,f as W,g as X,h as Y,i as Z,j as ee,k as te,l as ie,m as re}from"./chunk-MXBOM6NM.js";import{J as $,a as y,b as E,c as N,d as V,f as M,h as k,i as A,m as R,o as B}from"./chunk-LNSE2LWZ.js";import{a as O,b as U}from"./chunk-SF66SOHA.js";import"./chunk-IYA3KDXR.js";import{d as S,f as D}from"./chunk-QMOUT7EP.js";import{Ha as u,Hb as l,Jb as F,Ma as h,Ra as v,Xa as m,Za as g,a as T,ca as C,da as _,hb as d,ib as n,jb as o,kb as p,ob as w,pb as I,rb as x,tb as c,ub as f}from"./chunk-P2JPIS2X.js";function le(i,e){i&1&&(n(0,"th",11),l(1," ID "),o())}function ae(i,e){if(i&1&&(n(0,"td",12),l(1),o()),i&2){let t=e.$implicit;u(),F(" ",t.id," ")}}function ue(i,e){i&1&&(n(0,"th",11),l(1," Curso "),o())}function de(i,e){if(i&1&&(n(0,"td",12),l(1),o()),i&2){let t=e.$implicit;u(),F(" ",t.title," ")}}function me(i,e){i&1&&(n(0,"th",11),l(1," Descripci\xF3n "),o())}function ce(i,e){if(i&1&&(n(0,"td",12),l(1),o()),i&2){let t=e.$implicit;u(),F(" ",t.description," ")}}function pe(i,e){i&1&&(n(0,"th"),l(1," Acciones "),o())}function fe(i,e){if(i&1){let t=x();n(0,"tr",13)(1,"button",14),c("click",function(){let s=C(t).$implicit,a=f();return _(a.onEdit(s))}),n(2,"mat-icon"),l(3,"edit"),o()(),n(4,"button",15),c("click",function(){let s=C(t).$implicit,a=f();return _(a.onDelete(s))}),n(5,"mat-icon"),l(6,"delete"),o()()()}if(i&2){let t=f();u(),d("disabled",t.role!=="admin"),u(3),d("disabled",t.role!=="admin")}}function Ce(i,e){i&1&&p(0,"tr",16)}function _e(i,e){i&1&&p(0,"tr",17)}var G=class i{courses=[];CourseEdit=new g;CourseDelete=new g;displayedColumns=["id","title","description","acciones"];role="";constructor(){}ngOnInit(){this.role=sessionStorage.getItem("role")||""}onDelete(e){this.CourseDelete.emit(e)}onEdit(e){let t;t=e,this.CourseEdit.emit(t)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-courses-table"]],inputs:{courses:"courses"},outputs:{CourseEdit:"CourseEdit",CourseDelete:"CourseDelete"},decls:15,vars:3,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","acciones"],[4,"matHeaderCellDef"],["class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"text-center"],["mat-icon-button","","color","primary",1,"btn","btn-success",3,"click","disabled"],["mat-icon-button","","color","warn",1,"btn","btn-danger",3,"click","disabled"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(n(0,"table",0),w(1,1),m(2,le,2,0,"th",2)(3,ae,2,1,"td",3),I(),w(4,4),m(5,ue,2,0,"th",2)(6,de,2,1,"td",3),I(),w(7,5),m(8,me,2,0,"th",2)(9,ce,2,1,"td",3),I(),w(10,6),m(11,pe,2,0,"th",7)(12,fe,7,2,"tr",8),I(),m(13,Ce,1,0,"tr",9)(14,_e,1,0,"tr",10),o()),t&2&&(d("dataSource",r.courses),u(13),d("matHeaderRowDef",r.displayedColumns),u(),d("matRowDefColumns",r.displayedColumns))},dependencies:[te,z,J,X,K,L,Y,Q,W,Z,ee,U,O],encapsulation:2})};function ge(i,e){i&1&&(n(0,"div"),l(1," DNI es requerido "),o())}function he(i,e){i&1&&(n(0,"div"),l(1," Nombre del curso es requerido "),o())}function ve(i,e){i&1&&(n(0,"div"),l(1," Descripci\xF3n es requerido "),o())}var q=class i{constructor(e){this.fb=e}courseForm;courseAdded=new g;noChanges=new g;ngOnInit(){this.courseForm=this.fb.group({id:[0,[E.required]],title:["",E.required],description:["",E.required]})}onSubmit(){this.courseAdded.emit(this.courseForm.value)}onReset(){this.courseForm.reset(),this.noChanges.emit(!0)}static \u0275fac=function(t){return new(t||i)(h(R))};static \u0275cmp=v({type:i,selectors:[["app-add-course"]],outputs:{courseAdded:"courseAdded",noChanges:"noChanges"},decls:26,vars:5,consts:[[1,"container","bg-light"],[1,"mb-3",3,"ngSubmit","formGroup"],[1,"form-group"],["for","dni"],["type","text","id","id","formControlName","id","placeholder","Ingrese ID","readonly","",1,"form-control"],[4,"ngIf"],["for","name"],["type","text","id","title","formControlName","title","placeholder","Ingrese nombre del curso",1,"form-control"],["for","surname"],["type","text","id","description","formControlName","description","placeholder","Ingrese breve descripci\xF3n",1,"form-control"],[1,"row","text-center","mb-3"],[1,"col","text-center"],["type","submit",1,"btn","btn-success",3,"click","disabled"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,r){if(t&1&&(n(0,"div",0)(1,"h2"),l(2,"A\xF1adir Curso"),o(),n(3,"form",1),c("ngSubmit",function(){return r.onSubmit()}),n(4,"div",2)(5,"label",3),l(6,"ID:"),o(),p(7,"input",4),m(8,ge,2,0,"div",5),o(),n(9,"div",2)(10,"label",6),l(11,"Curso:"),o(),p(12,"input",7),m(13,he,2,0,"div",5),o(),n(14,"div",2)(15,"label",8),l(16,"Descripci\xF3n:"),o(),p(17,"input",9),m(18,ve,2,0,"div",5),o()(),n(19,"div",10)(20,"div",11)(21,"button",12),c("click",function(){return r.onSubmit()}),l(22,"Agregar Curso"),o()(),n(23,"div",11)(24,"button",13),c("click",function(){return r.onReset()}),l(25,"Salir"),o()()()()),t&2){let s,a,b;u(3),d("formGroup",r.courseForm),u(5),d("ngIf",((s=r.courseForm.get("dni"))==null?null:s.invalid)&&((s=r.courseForm.get("dni"))==null?null:s.touched)),u(5),d("ngIf",((a=r.courseForm.get("title"))==null?null:a.invalid)&&((a=r.courseForm.get("title"))==null?null:a.touched)),u(5),d("ngIf",((b=r.courseForm.get("description"))==null?null:b.invalid)&&((b=r.courseForm.get("description"))==null?null:b.touched)),u(3),d("disabled",r.courseForm.invalid)}},dependencies:[B,M,y,N,V,k,A,D,S],encapsulation:2})};function Ee(i,e){i&1&&(n(0,"div"),l(1," DNI es requerido "),o())}function xe(i,e){i&1&&(n(0,"div"),l(1," Nombre del curso es requerido "),o())}function Se(i,e){i&1&&(n(0,"div"),l(1," Descripci\xF3n es requerido "),o())}var H=class i{constructor(e){this.fb=e}courseForm;courseEdited=new g;noChanges=new g;_courseEdit;course={id:0,title:"",description:""};set courseEdit(e){e&&(this._courseEdit=e,this.course=T({},e),this.courseForm&&this.loadCourseData())}loadCourseData(){this.courseForm.setValue({id:this.course.id,title:this.course.title,description:this.course.description})}ngOnInit(){this.courseForm=this.fb.group({id:[0,[E.required]],title:["",E.required],description:["",E.required]}),this._courseEdit&&this.loadCourseData()}onSubmit(){this.courseEdited.emit(this.courseForm.value)}onReset(){this.noChanges.emit(!0)}static \u0275fac=function(t){return new(t||i)(h(R))};static \u0275cmp=v({type:i,selectors:[["app-edit-course"]],inputs:{courseEdit:"courseEdit"},outputs:{courseEdited:"courseEdited",noChanges:"noChanges"},decls:26,vars:5,consts:[[1,"container","bg-light"],[1,"mb-3",3,"ngSubmit","formGroup"],[1,"form-group"],["for","dni"],["type","text","id","id","formControlName","id","placeholder","Ingrese ID","readonly","",1,"form-control"],[4,"ngIf"],["for","name"],["type","text","id","title","formControlName","title","placeholder","Ingrese nombre del curso",1,"form-control"],["for","surname"],["type","text","id","description","formControlName","description","placeholder","Ingrese breve descripci\xF3n",1,"form-control"],[1,"row","text-center","mb-3"],[1,"col","text-center"],["type","submit",1,"btn","btn-success",3,"click","disabled"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,r){if(t&1&&(n(0,"div",0)(1,"h2"),l(2,"Editar Curso"),o(),n(3,"form",1),c("ngSubmit",function(){return r.onSubmit()}),n(4,"div",2)(5,"label",3),l(6,"ID:"),o(),p(7,"input",4),m(8,Ee,2,0,"div",5),o(),n(9,"div",2)(10,"label",6),l(11,"Curso:"),o(),p(12,"input",7),m(13,xe,2,0,"div",5),o(),n(14,"div",2)(15,"label",8),l(16,"Descripci\xF3n:"),o(),p(17,"input",9),m(18,Se,2,0,"div",5),o()(),n(19,"div",10)(20,"div",11)(21,"button",12),c("click",function(){return r.onSubmit()}),l(22,"Editar Curso"),o()(),n(23,"div",11)(24,"button",13),c("click",function(){return r.onReset()}),l(25,"Salir"),o()()()()),t&2){let s,a,b;u(3),d("formGroup",r.courseForm),u(5),d("ngIf",((s=r.courseForm.get("dni"))==null?null:s.invalid)&&((s=r.courseForm.get("dni"))==null?null:s.touched)),u(5),d("ngIf",((a=r.courseForm.get("title"))==null?null:a.invalid)&&((a=r.courseForm.get("title"))==null?null:a.touched)),u(5),d("ngIf",((b=r.courseForm.get("description"))==null?null:b.invalid)&&((b=r.courseForm.get("description"))==null?null:b.touched)),u(3),d("disabled",r.courseForm.invalid)}},dependencies:[B,M,y,N,V,k,A,D,S],encapsulation:2})};function De(i,e){if(i&1){let t=x();n(0,"app-courses-table",10),c("CourseDelete",function(s){C(t);let a=f();return _(a.onDelete(s))})("CourseEdit",function(s){C(t);let a=f();return _(a.onEdit(s))}),o()}if(i&2){let t=f();d("courses",t.courses)}}function we(i,e){if(i&1){let t=x();n(0,"app-add-course",11),c("courseAdded",function(s){C(t);let a=f();return _(a.addCourse(s))})("noChanges",function(s){C(t);let a=f();return _(a.noChangeNewCourse(s))}),o()}}function Ie(i,e){if(i&1){let t=x();n(0,"app-edit-course",12),c("courseEdited",function(s){C(t);let a=f();return _(a.editedCourse(s))})("noChanges",function(s){C(t);let a=f();return _(a.noChangeEditCourse(s))}),o()}if(i&2){let t=f();d("courseEdit",t.editCourse)}}var se=class i{constructor(e,t,r){this._servicios=e;this.dialog=t;this.snackBar=r}editCourse;courses=[];formVisible=[!1,!1,!1];ngOnInit(){this.loadCourses(),this.formVisible[0]=!0}loadCourses(){this._servicios.loadCourses().subscribe({next:e=>{this.courses=e,this.noChangeNewCourse(!0)},error:e=>{console.log(e),this.snackBar.show(`UPS!! ha pasado algo ${e.message}`)},complete:()=>{console.log("Proceso completado!!")}})}newCourse(){this.formVisible=[!1,!0,!1]}noChangeNewCourse(e){this.formVisible=[e,!1,!1]}addCourse(e){this._servicios.addCourse(e).subscribe({next:t=>{t&&(this.snackBar.show("REGISTERED Course!!!"),this.loadCourses()),this.noChangeNewCourse(!0)},error:t=>{this.snackBar.show(t.message)}})}editedCourse(e){this._servicios.editCourse(e).subscribe({next:t=>{if(t){this.snackBar.show("UPDATED Course!!!");let r=this.courses.findIndex(s=>s.id===e.id);r!==-1&&(this.courses[r]=T({},e),this.courses=[...this.courses]),this.noChangeEditCourse(!0)}},error:t=>{this.snackBar.show(t.message)}})}onEdit(e){this.editCourse=e,this.formVisible=[!1,!1,!0]}noChangeEditCourse(e){this.formVisible=[e,!1,!1]}onDelete(e){this.dialog.open(re,{width:"450px",height:"250px",data:{mensaje:"\xBFEst\xE1s seguro de eliminar el curso "+e.title+"?"}}).afterClosed().subscribe(r=>{r?this._servicios.deleteCourse(e.id).subscribe({next:s=>{s&&(this.courses=this.courses.filter(a=>a.id!==e.id),this.snackBar.show("DELETED Course!!!"))},error:s=>{console.log(s),this.snackBar.show(`Ha sucedido lo siguiente ${s.message}`)}}):console.log("El usuario cancel\xF3")})}static \u0275fac=function(t){return new(t||i)(h(oe),h(ie),h($))};static \u0275cmp=v({type:i,selectors:[["app-course"]],decls:16,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"row","mt-1"],[1,"d-flex","justify-content-between","align-items-center","p-3","bg-light","rounded","border"],[1,"mb-0","d-flex"],[1,"btn","btn-primary",3,"click"],[1,"w-100"],[3,"courses","CourseDelete","CourseEdit",4,"ngIf"],[3,"courseAdded","noChanges",4,"ngIf"],[3,"courseEdit","courseEdited","noChanges",4,"ngIf"],[3,"CourseDelete","CourseEdit","courses"],[3,"courseAdded","noChanges"],[3,"courseEdited","noChanges","courseEdit"]],template:function(t,r){t&1&&(n(0,"div",0),p(1,"div",1),n(2,"div",2)(3,"div",3)(4,"h5",4)(5,"mat-icon"),l(6,"library_books"),o(),l(7," Cursos"),o(),n(8,"button",5),c("click",function(){return r.newCourse()}),l(9,"Nuevo"),o()()(),n(10,"div",2)(11,"div",3)(12,"div",6),m(13,De,1,1,"app-courses-table",7)(14,we,1,0,"app-add-course",8)(15,Ie,1,1,"app-edit-course",9),o()()()()),t&2&&(u(13),d("ngIf",r.formVisible[0]),u(),d("ngIf",r.formVisible[1]),u(),d("ngIf",r.formVisible[2]))},dependencies:[G,D,S,q,H,O],encapsulation:2})};export{se as Courses};
